<!DOCTYPE html>

<!--
//
//  index.html
//  This file is part of XG - XDCC Grabscher
//  http://www.larsformella.de/lang/en/portfolio/programme-software/xg
//
//  Author:
//       Lars Formella <ich@larsformella.de>
//
//  Copyright (c) 2012 Lars Formella
//
//  This program is free software; you can redistribute it and/or modify
//  it under the terms of the GNU General Public License as published by
//  the Free Software Foundation; either version 2 of the License, or
//  (at your option) any later version.
//
//  This program is distributed in the hope that it will be useful,
//  but WITHOUT ANY WARRANTY; without even the implied warranty of
//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
//  GNU General Public License for more details.
//
//  You should have received a copy of the GNU General Public License
//  along with this program; if not, write to the Free Software
//  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
//
-->

<html lang="en" ng-app="xg">
	<head>
		<meta charset="utf-8">
		<title>XG Webfrontend v{{version}}</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="/Content/normalize.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="/Resources/css/ng-table.css"/>
		<link rel="stylesheet" href="/Content/bootstrap.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="/Resources/css/animation.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="/Resources/css/animate.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="/Resources/css/tango-colors.css" type="text/css" media="screen"/>
		<link rel="stylesheet" href="/Resources/css/xg.css" type="text/css" media="screen"/>

		<link rel="shortcut icon" href="favicon.ico">
	</head>

	<body>

		<script type="text/ng-template" id="passwordDialog.html">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h4 class="modal-title" translate>Password required</h4>
					</div>
					<div class="modal-body">
						<p translate>Please enter the password for this webfrontend.</p>
						<div class="form-horizontal">
							<div class="form-group" ng-class="{'has-error': passwordWrong}">
								<label class="col-lg-2 control-label" for="password" translate>Password</label>
								<div class="col-lg-10">
									<input type="password" name="password" ng-model="$parent.password" class="form-control" placeholder="Password" ng-keydown="passwordKeydown($event)"/>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<span class="glyphicon glyphicon-asterisk animate-spin" ng-show="$parent.passwordLoading"></span>
						<a class="btn btn-primary" ng-click="checkPassword()">
							<span class="glyphicon glyphicon-log-in"></span> <span translate>Connect</span>
						</a>
					</div>
				</div>
			</div>
		</script>

		<script type="text/ng-template" id="xdccDialog.html">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" ng-click="$dismiss()" class="close">&times;</button>
						<h4 class="modal-title" translate>XDCC link input</h4>
					</div>
					<div class="modal-body">
						<p translate>Please enter a valid XDCC link.</p>
						<div class="form-horizontal">
							<div class="form-group" ng-class="{'has-error': !isXdccLinkValid()}">
								<label class="col-lg-3 control-label" for="xdccLink" translate>XDCC link</label>
								<div class="col-lg-9">
									<input type="text" name="xdccLink" ng-model="$parent.xdccLink" class="form-control" placeholder="XDCC Link" ng-keydown="xdccKeydown($event)"/>
								</div>
							</div>
							<div class="form-group">
								<label class="col-lg-3 control-label" for="xdccLink" translate>Example link</label>
								<div class="col-lg-9">
									<p class="form-control-static">xdcc://irc.server.net/servername/#channel/bot/#3/Test.avi/</p>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<a class="btn btn-primary" ng-click="save()" ng-disabled="!isXdccLinkValid()">
							<span class="glyphicon glyphicon-cloud-download"></span> <span translate>Download</span>
						</a>
					</div>
				</div>
			</div>
		</script>

		<script type="text/ng-template" id="serverChannelDialog.html">
			<div class="serverChannelsDialog modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" ng-click="$dismiss()" class="close">&times;</button>
						<h4 class="modal-title" translate>Change Servers and Channels</h4>
					</div>
					<div class="modal-body">
						<div class="row">
							<div class="col-md-5">
								<div class="tableDiv">
									<table ng-table="tableParamsServer" class="table">
										<thead>
											<tr>
												<th width="38"></th>
												<th class="sortable" ng-click="tableParamsServer.sorting({'Name' : tableParamsServer.isSortBy('Name', 'asc') ? 'desc' : 'asc'})">
													<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParamsServer.isSortBy('Name', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParamsServer.isSortBy('Name', 'desc')}"></span>
													<span translate>Name</span>
												</th>
												<th width="40"></th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="server in $data">
												<td class="withIcon">
													<span class="clickAble" ng-bind-html='server|formatServerIcon' ng-click="serverSignalr.flip(server);"></span>
												</td>
												<td class="rowWithText">
													<span class="clickAble" ng-bind-html='server|formatServerName|trustAsHtml' ng-click="serverSignalr.server = server"></span>
												</td>
												<td class="text-right">
													<span class="glyphicon glyphicon-remove-circle ScarletRedMiddle clickAble" ng-click="serverSignalr.remove(server)"></span>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
								<div class="form-horizontal">
									<div class="form-group">
										<label class="col-lg-2 control-label" for="server" translate>Server</label>
										<div class="col-lg-10">
											<div class="input-group">
												<input class="form-control" type="text" name="server" ng-model="$parent.server" ng-keydown="serverKeydown($event);"/>
												<span class="input-group-btn">
													<button class="btn" ng-click="addServer();" translate>Add</button>
												</span>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-md-7" ng-show="serverSignalr.server != null">
								<div class="tableDiv">
									<table ng-table="tableParamsChannel" class="table">
										<thead>
											<tr>
												<th width="38"></th>
												<th class="sortable" ng-click="tableParamsChannel.sorting({'Name' : tableParamsChannel.isSortBy('Name', 'asc') ? 'desc' : 'asc'})">
													<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParamsChannel.isSortBy('Name', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParamsChannel.isSortBy('Name', 'desc')}"></span>
													<span translate>Name</span>
												</th>
												<th class="sortable text-right sortable" width="90" ng-click="tableParamsChannel.sorting({'User' : tableParamsChannel.isSortBy('User', 'asc') ? 'desc' : 'asc'})">
													<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParamsChannel.isSortBy('User', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParamsChannel.isSortBy('User', 'desc')}"></span>
													<span translate>User</span>
												</th>
												<th class="sortable text-right sortable" width="90" ng-click="tableParamsChannel.sorting({'Bots' : tableParamsChannel.isSortBy('Bots', 'asc') ? 'desc' : 'asc'})">
													<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParamsChannel.isSortBy('Bots', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParamsChannel.isSortBy('Bots', 'desc')}"></span>
													<span translate>Bots</span>
												</th>
												<th width="40"></th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="channel in $data">
												<td class="withIcon">
													<span class="clickAble" ng-bind-html='channel|formatChannelIcon' ng-click="channelSignalr.flip(channel)"></span>
												</td>
												<td class="withProgress">
													<span ng-bind-html='channel|formatChannelName|trustAsHtml'></span>
												</td>
												<td class="text-right">
													{{channel.UserCount}}
												</td>
												<td class="text-right">
													{{channel.BotCount}}
												</td>
												<td class="text-right">
													<span class="glyphicon glyphicon-remove-circle ScarletRedMiddle clickAble" ng-click="channelSignalr.remove(channel)"></span>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
								<div class="form-horizontal">
									<div class="form-group">
										<label class="col-lg-2 control-label" for="channel" translate>Channel</label>
										<div class="col-lg-10">
											<div class="input-group">
												<input class="form-control" type="text" name="channel" ng-model="$parent.channel" ng-keydown="channelKeydown($event)"/>
												<span class="input-group-btn">
													<button class="btn" ng-click="addChannel()" translate>Add</button>
												</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</script>

		<script type="text/ng-template" id="apiDialog.html">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" ng-click="$dismiss()" class="close">&times;</button>
						<h4 class="modal-title" translate>Change Servers and Channels</h4>
					</div>
					<div class="modal-body">
						<div class="row">
							<div class="tableDiv">
								<table ng-table="tableParams" class="table">
									<thead>
										<tr>
											<th width="38"></th>
											<th class="sortable" ng-click="tableParams.sorting({'Name' : tableParams.isSortBy('Name', 'asc') ? 'desc' : 'asc'})">
												<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Name', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Name', 'desc')}"></span>
												<span translate>Name</span>
											</th>
											<th width="40"></th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="server in $data">
											<td class="withIcon">
												<span class="clickAble" ng-bind-html='server|formatServerIcon' ng-click="serverSignalr.flip(server);"></span>
											</td>
											<td class="rowWithText">
												<span class="clickAble" ng-bind-html='server|formatServerName|trustAsHtml' ng-click="serverSignalr.server = server"></span>
											</td>
											<td class="text-right">
												<span class="glyphicon glyphicon-remove-circle ScarletRedMiddle clickAble" ng-click="serverSignalr.remove(server)"></span>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-lg-2 control-label" for="server" translate>Server</label>
									<div class="col-lg-10">
										<div class="input-group">
											<input class="form-control" type="text" name="server" ng-model="$parent.server" ng-keydown="serverKeydown($event);"/>
											<span class="input-group-btn">
												<button class="btn" ng-click="addServer();" translate>Add</button>
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</script>

		<div ng-controller="MainCtrl">
			<nav class="navbar navbar-default navbar-fixed-top ng-hide" role="navigation" ng-show="passwordOk">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">XG v{{config.version}}</a>
				</div>
				<div class="collapse navbar-collapse navbar-ex1-collapse">
					<ul class="nav navbar-nav">
						<li ng-class="{'active': slide == 1}">
							<a href="#" ng-click="slideTo(1)">
								<span class="glyphicon glyphicon-dashboard glyphiconBig" title="{{'Dashboard'|translate}}"></span>
							</a>
						</li>
						<li ng-class="{'active': slide == 2}">
							<a href="#" ng-click="slideTo(2)">
								<span class="glyphicon glyphicon-list-alt glyphiconBig" title="{{'IRC View'|translate}}"></span>
							</a>
						</li>
						<li ng-class="{'active': slide == 3}">
							<a href="#" ng-click="slideTo(3)">
								<span class="glyphicon glyphicon-cloud-download glyphiconBig" title="{{'External search'|translate}}"></span>
							</a>
						</li>
						<li ng-class="{'active': slide == 4}">
							<a href="#" ng-click="slideTo(4)">
								<span class="glyphicon glyphicon-hdd glyphiconBig" title="{{'Files'|translate}}"></span>
							</a>
						</li>
						<li ng-class="{'active': slide == 5}">
							<a href="#" ng-click="slideTo(5)">
								<span class="glyphicon glyphicon-stats glyphiconBig" title="{{'Graphs'|translate}}"></span>
							</a>
						</li>
						<li id="notifications" class="dropdown" ng-controller="NotificationCtrl">
							<a class="dropdown-toggle" ng-click="counter = 0; refresh()">
								<span class="glyphicon glyphicon-exclamation-sign glyphiconBig" title="{{'Notifications'|translate}}"></span>
								<span class="label label-danger" ng-show="counter > 0">{{counter}}</span>
							</a>
							<div class="dropdown-menu">
								<h3 class="popover-title" translate>Notifications</h3>
								<div class="popover-content">
									<table ng-table="tableParams" class="table">
										<thead>
											<tr>
												<th width="40"></th>
												<th translate>
													Content
												</th>
												<th width="190" translate>
													Time
												</th>
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="notification in $data">
												<td class="withIcon">
													<span ng-bind-html='notification|formatNotificationIcon'></span>
												</td>
												<td class="rowWithText">
													<span ng-bind-html='notification|formatNotificationContent|trustAsHtml'></span>
												</td>
												<td class="text-right">
													{{notification.Time|date2Human}}
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</li>
						<li class="dropdown">
							<a class="dropdown-toggle">
								<span class="glyphicon glyphicon-cog glyphiconBig" title="{{'Settings'|translate}}"></span>
							</a>
							<ul class="dropdown-menu">
								<li>
									<a ng-click="openServerChannelsDialog()">
										<span class="glyphicon glyphicon-globe"></span>
										<span translate>Server / Channels</span>
									</a>
								</li>
								<li>
									<a ng-click="openXdccDialog()">
										<span class="glyphicon glyphicon-cloud-download"></span>
										<span translate>XDCC link input</span>
									</a>
								</li>
								<li class="divider"></li>
								<li>
									<a ng-click="flipSetting('showOfflineBots')" ng-class="{'ScarletRedDark': settings.showOfflineBots}">
										<span class="glyphicon glyphicon-eye-open"></span>
										<span translate>Hide offline Bots</span>
									</a>
								</li>
								<li>
									<a ng-click="flipSetting('humanDates')" ng-class="{'ScarletRedDark': settings.humanDates}">
										<span class="glyphicon glyphicon-time"></span>
										<span translate>Human readable dates</span>
									</a>
								</li>
							</ul>
						</li>
					</ul>
					<div id="search-area" ng-show="slide == 2 || slide == 3" ng-controller="SearchCtrl" class="navbar-form pull-right">
						<div id="searchLoading" ng-show="loading" class="glyphicon glyphicon-asterisk animate-spin ScarletRedDark"></div>
						<div id="searchForm" class="input-append dropdown navbar-form pull-right">
							<div class="form-group dropdown-toggle">
								<input type="text" class="search-query form-control" placeholder="Search" ng-model="search" ng-keydown="searchKeydown($event)"/>
							</div>
							<button class="btn btn-default" type="button" ng-show="!signalr.isObject(search)" ng-click="signalr.add(search)">
								<span class="glyphicon glyphicon-thumbs-up"></span>
							</button>
							<button class="btn btn-default" type="button" ng-show="signalr.isObject(search)" ng-click="signalr.removeByName(search)">
								<span class="glyphicon glyphicon-thumbs-down"></span>
							</button>
							<ul class="dropdown-menu">
								<li class="dropdown-header" translate>Predefined</li>
								<li ng-repeat="search in predefinedSearches">
									<a href="#" ng-click="$parent.searchByGuid(search.Guid); $parent.search = search.Name">
										<span class="resultsOnline label label-success pull-right">{{search.ResultsOnline}}</span>
										<span class="resultsOffline label label-default pull-right">{{search.ResultsOffline}}</span>
										<span class="text" title="{{search.Name}}">{{search.Name}}</span>
									</a>
								</li>
								<li class="divider"></li>
								<li class="dropdown-header" translate>Custom</li>
								<li ng-repeat="search in objects">
									<a href="#" ng-click="$parent.searchByGuid(search.Guid); $parent.search = search.Name">
										<span class="resultsOnline label label-success pull-right">{{search.ResultsOnline}}</span>
										<span class="resultsOffline label label-default pull-right">{{search.ResultsOffline}}</span>
										<span class="text" title="{{search.Name}}">{{search.Name}}</span>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</nav>
			<div class="container ng-hide" ng-show="passwordOk">
				<div ng-show="slide == 1" ng-controller="DashboardCtrl">

					<div class="panel panel-default dashboardItem">
						<div class="panel-heading">
							<h3 class="panel-title icons-globe" translate> Servers</h3>
						</div>
						<div class="panel-body">
							<div>
								<input knob thickness="0.25" max="2" current="21" snapshot="snapshot" size="100">
							</div>
							<div>
								<input knob thickness="0.1" max="2" current="3" snapshot="snapshot" size="70">
							</div>
							<div>
								{{snapshot[3]}} <span translate>of</span> {{snapshot[21]}} <span class="value" translate>connected</span>
							</div>
						</div>
					</div>

					<div class="panel panel-default dashboardItem">
						<div class="panel-heading">
							<h3 class="panel-title icons-comment" translate> Channels</h3>
						</div>
						<div class="panel-body">
							<div>
								<input knob thickness="0.25" max="5" current="23" snapshot="snapshot" size="100">
							</div>
							<div>
								<input knob thickness="0.1" max="5" current="6" snapshot="snapshot" size="70">
							</div>
							<div>
								{{snapshot[6]}} <span translate>of</span> {{snapshot[23]}} <span class="value" translate>connected</span>
							</div>
						</div>
					</div>

					<div class="panel panel-default dashboardItem">
						<div class="panel-heading">
							<h3 class="panel-title icons-user" translate> Bots</h3>
						</div>
						<div class="panel-body">
							<div>
								<input knob thickness="0.25" max="8" current="9" snapshot="snapshot" size="100">
							</div>
							<div></div>
							<div>
								{{snapshot[9]}} <span translate>of</span> {{snapshot[8]}} <span translate>online</span>
							</div>
						</div>
					</div>

					<div ng-show="snapshot.FileTimeMissing > 0" class="panel panel-default dashboardItem">
						<div class="panel-heading">
							<h3 class="panel-title icons-doc-text" translate> Files</h3>
						</div>
						<div class="panel-body">
							<div>
								<input knob thickness="0.25" max="30" current="27" snapshot="snapshot" size="100">
							</div>
							<div></div>
							<div>
								{{snapshot[27]|size2Human}}  <span translate>of</span> {{snapshot[30]|size2Human}} <span class="value" translate>downloaded</span>
							</div>
						</div>
						<div class="panel-footer">
							<span translate>Ready</span>: {{snapshot[29]|time2Human}}
						</div>
					</div>

				</div>
				<div ng-show="slide == 2" ng-controller="PacketCtrl" class="item">

					<table ng-table="tableParams" class="table">
						<thead>
							<tr>
								<th class="text-right sortable" width="52" ng-click="tableParams.sorting({'Id' : tableParams.isSortBy('Id', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Id', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Id', 'desc')}"></span>
									<span translate>Id</span>
								</th>
								<th width="37"></th>
								<th class="sortable" ng-click="tableParams.sorting({'Name' : tableParams.isSortBy('Name', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Name', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Name', 'desc')}"></span>
									<span translate>Name</span>
								</th>
								<th width="70" class="text-right sortable" ng-click="tableParams.sorting({'Size' : tableParams.isSortBy('Size', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Size', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Size', 'desc')}"></span>
									<span translate>Size</span>
								</th>
								<th width="140" class="text-right sortable" ng-click="tableParams.sorting({'Speed' : tableParams.isSortBy('Speed', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Speed', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Speed', 'desc')}"></span>
									<span translate>Speed</span>
								</th>
								<th width="170" class="sortable" ng-click="tableParams.sorting({'TimeMissing' : tableParams.isSortBy('TimeMissing', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('TimeMissing', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('TimeMissing', 'desc')}"></span>
									<span translate>Time Missing</span>
								</th>
								<th width="155" class="sortable" ng-click="tableParams.sorting({'LastMentioned' : tableParams.isSortBy('LastMentioned', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('LastMentioned', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('LastMentioned', 'desc')}"></span>
									<span translate>Last Mentioned</span>
								</th>
							</tr>
						</thead>
						<tbody ng-repeat="group in $groups" ng-class="{'isOffline': !$parent.parents[group.value].Connected}">
							<tr class="ng-table-group">
								<td></td>
								<td class="withIcon">
									<span ng-bind-html='$parent.parents[group.value]|formatBotIcon'></span>
								</td>
								<td colspan="2" class="rowWithText">
									<span ng-bind-html='$parent.parents[group.value]|formatBotName'></span>
								</td>
								<td class="text-right">
									{{$parent.parents[group.value]|formatBotSpeed}}
								</td>
								<td colspan="2"></td>
							</tr>
							<tr ng-repeat="packet in group.data">
								<td class="text-right">
									#{{packet.Id}}
								</td>
								<td class="withIcon">
									<span class="clickAble" ng-bind-html='packet|formatPacketIcon' ng-click="$parent.signalr.flip(packet)"></span>
								</td>
								<td class="withProgress">
									<span ng-bind-html='packet|formatPacketName|trustAsHtml'></span>
								</td>
								<td class="text-right">
									{{packet.Size|size2Human}}
								</td>
								<td class="text-right">
									<span ng-if="packet.Connected"><strong>{{packet.Speed|speed2Human}}</strong></span>
									<span ng-if="!packet.Connected && packet.Next && $parent.parents[group.value].QueuePosition > 0"><strong>pos. {{$parent.parents[group.value].QueuePosition}}</strong></span>
								</td>
								<td>
									<span ng-if="packet.Connected"><strong>{{packet.TimeMissing|time2Human}}</strong></span>
									<span ng-if="!packet.Connected && packet.Next && $parent.parents[group.value].QueuePosition > 0"><strong>{{$parent.parents[group.value].QueueTime|time2Human}}</strong></span>
								</td>
								<td class="text-right">
									{{packet.LastMentioned|date2Human}}
								</td>
							</tr>
						</tbody>
					</table>

				</div>
				<div ng-show="slide == 3" ng-controller="ExternalCtrl" class="item">

					<table ng-table="tableParams" class="table">
						<thead>
							<tr>
								<th class="text-right sortable" width="52" ng-click="tableParams.sorting({'Id' : tableParams.isSortBy('Id', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Id', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Id', 'desc')}"></span>
									<span translate>Id</span>
								</th>
								<th width="37"></th>
								<th class="sortable" ng-click="tableParams.sorting({'Name' : tableParams.isSortBy('Name', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Name', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Name', 'desc')}"></span>
									<span translate>Name</span>
								</th>
								<th width="70" class="text-right sortable" ng-click="tableParams.sorting({'Size' : tableParams.isSortBy('Size', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Size', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Size', 'desc')}"></span>
									<span translate>Size</span>
								</th>
								<th width="140" class="text-right sortable" ng-click="tableParams.sorting({'Speed' : tableParams.isSortBy('Speed', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Speed', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Speed', 'desc')}"></span>
									<span translate>Speed</span>
								</th>
								<th width="170" class="sortable" ng-click="tableParams.sorting({'TimeMissing' : tableParams.isSortBy('TimeMissing', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('TimeMissing', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('TimeMissing', 'desc')}"></span>
									<span translate>Time Missing</span>
								</th>
								<th width="155" class="sortable" ng-click="tableParams.sorting({'LastMentioned' : tableParams.isSortBy('LastMentioned', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('LastMentioned', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('LastMentioned', 'desc')}"></span>
									<span translate>Last Mentioned</span>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="packet in $data">
								<td class="text-right">
									#{{packet.Id}}
								</td>
								<td class="withIcon">
									<span class="clickAble" ng-bind-html='packet|formatPacketIcon' ng-click="$parent.signalr.server.parseXdccLink(IrcLink)"></span>
								</td>
								<td>
									<span ng-bind-html='packet|formatPacketName|trustAsHtml'></span>
								</td>
								<td class="text-right">
									{{packet.Size|size2Human}}
								</td>

								<td class="text-right">
									<span ng-if="packet.Connected"><strong>{{packet.Speed|speed2Human}}</strong></span>
									<span ng-if="!packet.Connected && packet.Next && $parent.parents[group.value].QueuePosition > 0"><strong>pos. {{$parent.parents[group.value].QueuePosition}}</strong></span>
								</td>
								<td>
									<span ng-if="packet.Connected"><strong>{{packet.TimeMissing|time2Human}}</strong></span>
									<span ng-if="!packet.Connected && packet.Next && $parent.parents[group.value].QueuePosition > 0"><strong>{{$parent.parents[group.value].QueueTime|time2Human}}</strong></span>
								</td>
								<td class="text-right">
									{{packet.LastMentioned|date2Human}}
								</td>
							</tr>
						</tbody>
					</table>

				</div>
				<div ng-show="slide == 4" ng-controller="FileCtrl" class="item">

					<table ng-table="tableParams" class="table">
						<thead>
							<tr>
								<th width="32"></th>
								<th class="sortable" ng-click="tableParams.sorting({'Name' : tableParams.isSortBy('Name', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Name', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Name', 'desc')}"></span>
									<span translate>Name</span>
								</th>
								<th width="70" class="text-right sortable" ng-click="tableParams.sorting({'Size' : tableParams.isSortBy('Size', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('Size', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('Size', 'desc')}"></span>
									<span translate>Size</span>
								</th>
								<th width="170" class="sortable" ng-click="tableParams.sorting({'TimeMissing' : tableParams.isSortBy('TimeMissing', 'asc') ? 'desc' : 'asc'})">
									<span ng-class="{'glyphicon glyphicon-sort-by-alphabet': tableParams.isSortBy('TimeMissing', 'asc'), 'glyphicon glyphicon-sort-by-alphabet-alt': tableParams.isSortBy('TimeMissing', 'desc')}"></span>
									<span translate>Time Missing</span>
								</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="file in $data">
								<td class="withIcon">
									<span class="clickAble" ng-bind-html='file|formatFileIcon' ng-click="$parent.signalr.remove(file)"></span>
								</td>
								<td class="withProgress">
									<span ng-bind-html='file|formatFileName|trustAsHtml'></span>
								</td>
								<td class="text-right">
									{{file.Size|size2Human}}
								</td>
								<td class="text-right">
									{{file.TimeMissing|time2Human}}
								</td>
							</tr>
						</tbody>
					</table>

				</div>
				<div ng-show="slide == 5" ng-controller="SnapshotCtrl" id="snapshot" class="item">

					<div class="col-md-2">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h4 class="panel-title">Timespan </h4>
							</div>
							<div class="panel-collapse">
								<div class="panel-body">
									<label class="radio">
										<input type="radio" id="time1" name="snapshotTime" value="1" checked="checked" ng-click="days = 1; updateSnapshots()">
										<span translate>1 Day</span>
									</label>
									<label class="radio">
										<input type="radio" id="time7" name="snapshotTime" value="7" ng-click="days = 7; updateSnapshots()">
										<span translate>1 Week</span>
									</label>
									<label class="radio">
										<input type="radio" id="time31" name="snapshotTime" value="31" ng-click="days = 31; updateSnapshots()">
										<span translate>1 Month</span>
									</label>
								</div>
							</div>
						</div>
						<div class="panel panel-default" ng-repeat="group in groups">
							<div class="panel-heading">
								<h4 class="panel-title">
									<a class="accordion-toggle" ng-click="group.collapsed = !group.collapsed">
										{{group.name}}
									</a>
								</h4>
							</div>
							<div class="panel-collapse" ng-show="group.collapsed">
								<div class="panel-body">
									<label class="checkbox" ng-repeat="type in group.types">
										<input type="checkbox" ng-click="type.enabled = !type.enabled" />
										<span translate>Snapshot_{{type.id}}</span>
									</label>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-10">
						<div flot days="days" groups="groups" snapshots="snapshots" style="height: 550px; width: 1000px;"></div>
					</div>

				</div>
			</div>
		</div>

		<script data-main="Resources/js/init" src="Scripts/require.js"></script>

	</body>
</html>
